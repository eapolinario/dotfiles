# Set prefix key
unbind-key C-b
set -g prefix C-'\'

# Reload settings
bind-key R source-file ~/.tmux.conf \; display-message "Config reloaded..".

# Toggle last window like screen
bind-key C-'\' last-window

# Start counting from 1
set -g base-index 1

# Pane splitting bindings
bind / split-window -h
bind - split-window -v
bind T split-window -p 25

# Simpler window movement
bind-key m command-prompt -p "move window to:"  "move-window -t '%%'"

# Pane movement
bind -n S-Left select-pane -L
bind -n S-Right select-pane -R
bind -n S-Up select-pane -U
bind -n S-Down select-pane -D

# Formatting panes
bind -r < resize-pane -L 5
bind -r > resize-pane -R 5

# Set size of history
set -g history-limit 1000000

# Enable scrollbar in terminal
set -g default-terminal "screen-256color"

# Remove administrative debris (session name, hostname, time) in status bar
set -g status-left ''
set -g status-right ''

# Centers the window list
set -g status-justify centre

# Better mouse support
# on iTerm2 Alt suppresses mouse-mode
set-option -g mouse on
set -g mouse on

# Enable automatic window renaming
set-window-option -g automatic-rename on

# Set inactive/active window styles
set -g window-style 'fg=colour247,bg=colour236'
set -g window-active-style 'fg=colour250,bg=black'

# set the pane border colors 
# I don't think this is working, I still see the thin green colors around the panes.
set -g pane-border-style 'fg=colour235,bg=colour238' 
set -g pane-active-border-style 'fg=colour51,bg=colour236,bold'

# Popup bindings
# Adapted from https://github.com/meain/dotfiles/blob/8523ac959e440e7d17e69507710ae85c200eea09/tmux/.tmux.conf#L216-#L231
# TODO: confirm tmux version needed. I verified on tmux next-3.3
# bind-key h 'popup -xC -yC -w80% -h80% -KER htop'

######################
## Tmux plugin area ##
######################

# tmux plugins
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'

set -g @plugin 'tmux-plugins/tmux-prefix-highlight'
set -g status-right '#{prefix_highlight} | %a %Y-%m-%d %H:%M'

set -g @plugin 'roosta/tmux-fuzzback'
set -g @fuzzback-bind 'S'
set -g @fuzzback-popup 1

set -g @plugin 'tmux-plugins/tmux-copycat'
# Changes the default regex search keybinding to '.' instead of '/', which was clashing with the
# horizontal split-window
set -g @copycat_search '.'

set -g @plugin 'laktak/extrakto'
set -g @extrakto_split_direction "v"
set -g @extrakto_split_size "50"

set -g @plugin 'Morantron/tmux-fingers'
set -g @fingers-key g

set -g @plugin 'haru-ake/tmux-pet'
set -g @pet-new-pane-key 'p'

set -g @plugin 'tmux-plugins/tmux-logging'

set -g @plugin 'schasse/tmux-jump'

set -g @plugin 'sainnhe/tmux-fzf'
set -g @tmux-fzf-launch-key 'F'

# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
run '~/.tmux/plugins/tpm/tpm'

#############################
## End of tmux plugin area ##
#############################
